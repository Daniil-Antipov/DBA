### Мониторинг
Мониторинг заключается в контроле работы сервера как со стороны ОС,так и со стороны БД.
Создаем базу данных и таблицу для сбора данных(мониторинга):
![Снимок экрана (70)](https://user-images.githubusercontent.com/114056557/195355392-b4ef8f25-c91b-4196-9b8b-d986eb1aef51.png)

Выполним вставку и удаление записей в таблицу t.

![Снимок экрана (71)](https://user-images.githubusercontent.com/114056557/195355404-e84d533d-524c-41fe-82fd-0b3db6af46b4.png)

Проверяем статистику обращений.

![Снимок экрана (73)](https://user-images.githubusercontent.com/114056557/195355862-cf1537ca-89a0-42bc-a14c-634d4ccd7572.png)

Получили следующее:было вставлено 1000 строк (n_tup_ins = 1000) и удалено 1000 строк (n_tup_del = 1000). После этого не осталось активных версий строк (n_live_tup = 0), все 1000 строк не актуальны на текущий момент (n_dead_tup = 1000).
Выполним очистку с помощью команды **VACUUM** и снова просмотрим статистику.

![Снимок экрана (75)](https://user-images.githubusercontent.com/114056557/195356112-94ad3000-8c27-4a34-8715-2780f1cd2d2c.png)

Видим, что неактуальные версии строк убраны при очистке (n_dead_tup = 0), очистка обрабатывала таблицу один раз (vacuum_count = 1).
Просмотрим статистику внутри БД **admin_monitoring**. Включаем сбор статистики ввода-вывода:

![Снимок экрана (77)](https://user-images.githubusercontent.com/114056557/195356370-bcae2cf4-e133-470c-b4c2-9365838c4435.png)

Смотреть на активности сервера имеет смысл, когда какие-то активности на самом деле есть. Чтобы сымитировать нагрузку, воспользуемся **pgbench** — штатной утилитой для запуска эталонных тестов.

![Снимок экрана (80)](https://user-images.githubusercontent.com/114056557/195356695-cf4858a0-e554-4750-b272-12a7991a9936.png)


Сбросим все накопленные ранее статистики:

![Снимок экрана (82)](https://user-images.githubusercontent.com/114056557/195357184-7dee2b1d-64ad-4d42-8535-42065b1ff9ba.png)

Теперь запускаем тест TPC-B на несколько секунд:

![Снимок экрана (84)](https://user-images.githubusercontent.com/114056557/195357418-44dbfbc4-1525-48bf-a698-0c7d26915a38.png)

Теперь мы можем посмотреть статистику обращения к таблицам в терминах строк:

![Снимок экрана (86)](https://user-images.githubusercontent.com/114056557/195357832-75d88ede-7a3d-46ca-9468-5172dc5a2ea2.png)

И в терминах страниц:

![Снимок экрана (88)](https://user-images.githubusercontent.com/114056557/195358236-885fc963-59de-4cb6-95a2-f7bce09e4256.png)

Можно посмотреть глобальную статистику по всей базе данных:

![Снимок экрана (91)](https://user-images.githubusercontent.com/114056557/195358735-4f4bb6e5-c356-4677-95c7-9d955c141442.png)




