# Атрибуты роли и групповые роли
#### Атрибуты ролей в Postgres
Атрибуты необходимы для задания пользователю определённых полномочий.
Право на подключение даёт атрибут **LOGIN**(при создании пользователя командой **CREATE USER** атрибут дейтвует по умолчанию). Создадим такого пользователя.
![Снимок экрана (68)](https://user-images.githubusercontent.com/114056557/195345738-7c77e7b9-e30a-44d4-b9f0-1af24664e8c4.png)
![Снимок экрана (60)](https://user-images.githubusercontent.com/114056557/195345824-1de3a97a-e480-4e27-a4fa-7833faa4f4f7.png)

Атрибут **SUPERUSER** даёт роли права супер пользователя. Однако этого делать не рукомендуется, так как это опасная привилегия и она не должна использоваться небрежно.
>Роль должна явно иметь разрешение на создание базы данных (за исключением суперпользователей, которые пропускают все проверки).
>
 Для задания нашей роли этого атрибута воспользуемся следующей командой **ALTER ROLE имя CREATEDB**.
 >
 ![Снимок экрана (69)](https://user-images.githubusercontent.com/114056557/195346329-2456787c-b06c-46eb-b370-60b714d6941e.png)
 
![Снимок экрана (61)](https://user-images.githubusercontent.com/114056557/195346339-1ab39314-765c-40b7-bd94-a758f19479e8.png)

Теперь дадим роли атрибут создания других ролей **ALTER ROLE имя CREATEROLE**. Так же атрибут даст возможность нашей роли создавать, удалять и изменять новые роли, а также выдавать и отзывать членство в ролях(за исключением ролей "суперпользователь").
 >
![Снимок экрана (70)](https://user-images.githubusercontent.com/114056557/195346943-4b6e0efa-9547-46f9-b9da-0883e291ebc9.png)
![Снимок экрана (62)](https://user-images.githubusercontent.com/114056557/195346976-cac0d926-5900-4d90-ae28-d87a89aec2b4.png)

Также роль должна иметь явное разрешение на запуск потоковой репликации (за исключением суперпользователей, которые пропускают все проверки). Роль, используемая для потоковой репликации, также должна иметь атрибут LOGIN. Для задания роли такого разрешения используем атрибут **REPLICATION**. Обновим нашу роль.
![Снимок экрана (71)](https://user-images.githubusercontent.com/114056557/195347768-7cb01830-b9cb-49c3-92cb-e6fe2c877d23.png)
![Снимок экрана (63)](https://user-images.githubusercontent.com/114056557/195347793-3feaa843-3191-4d2f-9c91-86647b410e4e.png)

Теперь наша роль обладает выше перечисленными правами.
#### Членство в другой роли
Часто пользователей могут быть одни и те же права, для того чтобы оптимизовать процесс задания этих прав, роли группируются, права можно выдавать для всей группы и у всей группы забирать. В Postgres для этого создаётся роль, представляющая группу, а затем членство в этой группе выдаётся ролям индивидуальных пользователей.Обычно групповая роль не имеет атрибута LOGIN, хотя при желании его можно установить. Создадим такую роль.

![Снимок экрана (72)](https://user-images.githubusercontent.com/114056557/195348026-6f7c680c-5836-4f59-9343-8e1afaa79606.png)
![Снимок экрана (64)](https://user-images.githubusercontent.com/114056557/195348049-12b0bad8-cc8d-467e-9386-07ff343e50c8.png)

После того как групповая роль создана, мы можем добавлять в неё членов или удалять их, используя команды **GRANT** и **REVOKE**.
Зададим групповой роли права создания БД.

![Снимок экрана (73)](https://user-images.githubusercontent.com/114056557/195348192-d14970b0-cd5a-4757-a63a-a89516a97ccd.png)
![Снимок экрана (65)](https://user-images.githubusercontent.com/114056557/195348213-30a2b89f-46bd-4843-a696-989a7ec1b15a.png)

Теперь создадим ещё одну роль и предоставим ей членство в нашей групповой роли.

![Снимок экрана (74)](https://user-images.githubusercontent.com/114056557/195348296-a50fcaf7-bd25-4ec0-9db6-951921d68435.png)
![Снимок экрана (66)](https://user-images.githubusercontent.com/114056557/195348329-b85093b0-5c2a-4b0f-8d9b-7b8659874595.png)

Таким же образом мы можем давать права на изменения в определённых таблицах или даже столбцах.
Лишение роли прав осуществляется командой **REVOKE**, однако сделать это может пользователь, который дал это право(В нашем случае это суперпользователь postgres). Заберём права группы у нашего user_to_to.

![Снимок экрана (74)](https://user-images.githubusercontent.com/114056557/195348570-d812636c-8a59-42cb-b252-d3769483e366.png)
![Снимок экрана (66)](https://user-images.githubusercontent.com/114056557/195348603-2bd1c20b-917b-41ba-8d2e-345f487643b9.png)
Как видим, что у user_to_to снова нет прав.
